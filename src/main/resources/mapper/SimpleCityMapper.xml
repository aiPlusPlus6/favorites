<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.aiplusplus.favorites.mapper.SimpleCityMapper">
    <select id="getIpOne" resultType="com.aiplusplus.favorites.doman.entity.simple.SimpleCity">
        select *
        from simple_city
        where LOCATE(province, #{province}) > 0
          AND LOCATE(city, #{city}) > 0
          <choose>
              <when test="district != null and district!= ''">
                    and LOCATE(district, #{district}) > 0
              </when>
              <otherwise>
                    and LOCATE(district, #{city}) > 0
              </otherwise>
          </choose>
          and deleted = 0
    </select>
</mapper>